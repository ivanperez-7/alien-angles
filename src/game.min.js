const w=960,h=720;class Nivel{constructor(e,t,a,s,i,o,n){this.titulo=e,this.fondo=t,this.planeta=a,this.alien=s,this.angulosBase=i,this.particles=o,this.introduccion=n}}const listaNiveles=[new Nivel("agudos","sky","tierra","alien1",Phaser.Utils.Array.NumberArray(4,16),"blueParticle",["¡Este alien está de visita por el planeta! Hará muchos recorridos a distintos lugares, ¡y necesita de tu ayuda!","Debes medir el ángulo formado por el recorrido del alien, ¡presta atención!"]),new Nivel("obtusos","space","venus","alien2",Phaser.Utils.Array.NumberArray(19,35),"blueParticle",["Ahora que estás familiarizado con los ángulos agudos, ¡es hora de trabajar con los obtusos!","El alien ahora hará recorridos más amplios por el planeta, ¡presta atención!"]),new Nivel("cóncavos","space2","mars","alien3",Phaser.Utils.Array.NumberArray(37,71),"blueParticle",["¡Wow! Hasta ahora has ayudado demasiado a nuestros dos amigos aliens, ¡muchas gracias!","Conoce ahora a nuestro tercer amigo, quien realizará recorridos mucho más amplios que los demás."]),new Nivel("por doquier","night","moon","alien4",Phaser.Utils.Array.NumberArray(2,71),"blueParticle",["¡Impresionante! Tienes un don para medir ángulos. Has sido de mucha ayuda para nuestros amigos aliens.","¡Nuestro cuarto y último amigo hará recorridos por el planeta entero! ¿Crees poder ayudarlo?"])],frases=["¡Excelente!","¡Maravilloso!","¡Lo lograste!","¡Perfecto!","¡Lo hiciste muy bien!","¡Pero qué habilidades!","¡Pan comido!"];var progreso,lastLevel;class Boot extends Phaser.Scene{constructor(){super("boot")}preload(){this.load.setPath("assets/"),["HUD","HUD2","agudosPreview","alien1","alien2","alien3","alien4","arrowWhite","blueParticle","btAgudo","btAyuda","btCasa","btConcavo","btJugar","btJugar2","btListo","btNiveles","btObtuso","btRepaso","btTransportador","candado","completoPreview","concavosPreview","cross","hideButton","logo","mars","moon","night","obtusosPreview","protact","sky","space","space2","star","textBox","tick","tierra","venus"].forEach(e=>this.load.image(e,e+".png")),["finger_snap","explain","win","complete"].forEach(e=>this.load.audio(e,[`sounds/${e}.ogg`,`sounds/${e}.mp3`])),localStorage.getItem("progreso")&&localStorage.getItem("lastLevel")||(localStorage.setItem("progreso","0"),localStorage.setItem("lastLevel","0")),progreso=parseInt(localStorage.getItem("progreso")),lastLevel=listaNiveles[parseInt(localStorage.getItem("lastLevel"))];var t=this.add.text(w/2,h/2,"Cargando... 0%",{fontFamily:"Showcard",fontSize:30}).setOrigin(.5,.5);this.load.on("progress",e=>t.setText(`Cargando... ${Math.floor(100*e)}%`)),this.load.on("complete",()=>this.scene.start("menu"))}}class Menu extends Phaser.Scene{constructor(){super("menu")}create(){this.input.setDefaultCursor("url(assets/blue.cur), pointer"),this.add.image(w/2,h/2,lastLevel.fondo);var e=this.add.image(w/2,180,"logo"),t=(this.alien=this.add.image(-60,645,lastLevel.alien).setScale(.55),this.add.image(w/2,378,"btJugar").setData("escena","instrucciones")),a=this.add.image(w/2,502,"btNiveles").setData("escena","niveles"),s=this.add.image(w/2,626,"btRepaso").setData("escena","repaso"),i=progreso<4?(s.setTint(2039583).setData("bloqueado",!0),this.add.image(w/2,622,"candado").setScale(.45)):this.add.image(-20,-20,"blueParticle"),o=0==progreso?(a.setTint(2039583).setData("bloqueado",!0),this.add.image(w/2,498,"candado").setScale(.45)):this.add.image(-20,-20,"blueParticle");this.animables=[e,t,a,s,i,o],this.interactive=[t,a,s],this.input.on("gameobjectover",(e,t,a)=>t.setScale(.35)).on("gameobjectout",(e,t,a)=>t.setScale(.3)).on("gameobjectdown",(e,t,a)=>{t.data.values.bloqueado||this.clearScreen(t.data.values.escena)}),this.tweens.add({targets:this.animables,scale:{from:0,to:.3},ease:"Back",duration:900,onComplete:()=>[t,a,s].forEach(e=>e.setInteractive())}),this.tweens.add({targets:[i,o],scale:{from:0,to:.45},ease:"Back",duration:900}),this.tweens.add({targets:this.alien,x:90,ease:"Power2",duration:700,delay:500})}clearScreen(e){this.interactive.forEach(e=>e.disableInteractive().setScale(.3)),this.tweens.add({targets:this.animables,scale:0,ease:"Back.easeIn",duration:900,onComplete:()=>this.scene.start(e)}),this.tweens.add({targets:this.alien,x:-60,ease:"Power2",duration:700})}}class Instrucciones extends Phaser.Scene{constructor(){super("instrucciones")}create(){this.add.image(w/2,h/2,lastLevel.fondo);for(var e=this.add.image(58,65,"btCasa").setScale(0).on("pointerdown",()=>this.clearScreen("menu")),t=this.add.image(863,640,"btJugar2").setScale(0).on("pointerdown",()=>this.clearScreen("juego")),a=this.add.text(w/2,65,"Instrucciones",{fontFamily:"Showcard",fontSize:38,stroke:"#40bad2",strokeThickness:3}).setOrigin(.5,.5).setScale(0),s=this.add.text(-470,h/2-35,"¡Bienvenido a Alien Angles! Nuestros amigos aliens están de visita por la galaxia y realizarán muchos recorridos en distintos planetas.\n\nNecesitan de tu ayuda para medir los ángulos de sus recorridos. ¿te crees capaz? ¡Vamos a averiguarlo!",{fontFamily:"Showcard",fontSize:26,align:"center",stroke:"#000000",strokeThickness:3}).setOrigin(.5,.5).setScale(0).setWordWrapWidth(w-100,!1).setLineSpacing(25),i=(this.tweens.add({targets:[e,t],scale:.3,ease:"Back",duration:900}),this.tweens.add({targets:[a,s],scale:1,ease:"Back",duration:900}),[]),o=0;o<4;o++){var n=this.add.image(270+140*o,900,["alien1","alien2","alien3","alien4"][o]).setScale(.5);i.push(n),this.tweens.add({targets:n,y:660,ease:"Sine.easeOut",delay:700+100*o})}this.tweens.add({targets:s,x:w/2,ease:"Bounce",delay:2e3,onComplete:()=>[e,t].forEach(e=>e.setInteractive())}),this.input.on("gameobjectover",(e,t,a)=>t.setScale(.35)).on("gameobjectout",(e,t,a)=>t.setScale(.3)).on("gameobjectdown",(e,t,a)=>t.setScale(.3)),this.animables=[e,t,a,s,...i]}clearScreen(e){this.animables.forEach(e=>e.disableInteractive()),this.tweens.add({targets:this.animables.slice(0,3),scale:0,ease:"Back.easeIn",duration:900,onComplete:()=>this.scene.start(e,{})}),this.tweens.add({targets:this.animables.slice(4),y:900,ease:"Sine.easeOut",duration:800}),this.tweens.add({targets:this.animables[3],x:-600,ease:"Sine.easeOut",duration:800})}}class Juego extends Phaser.Scene{constructor(){super("juego")}init(e){this.nivel=Phaser.Utils.Objects.HasAny(e,"alien")?e:listaNiveles[0],this.respuesta="0",this.angulos=Phaser.Utils.Array.Shuffle([...this.nivel.angulosBase]),this.data.set({estado:"inicio",nivActual:1}),this.helpDisplay=["¡El alien ha terminado su recorrido por la tierra! ¿Crees poder medir el ángulo formado?","Utiliza el transportador para ayudarte a medir el ángulo, y escribe tu respuesta con el teclado."],localStorage.setItem("lastLevel",listaNiveles.indexOf(this.nivel)+[]),lastLevel=this.nivel}create(){this.add.image(w/2,h/2,this.nivel.fondo);var e=this.add.image(w/2,h/2-30,this.nivel.planeta),t=this.make.graphics({x:w/2,y:h/2-30}).beginPath().fillCircle(0,0,211.5),a=this.add.text(w/2,65,"Ángulos "+this.nivel.titulo,{fontFamily:"Showcard",fontSize:38,stroke:"#40bad2",strokeThickness:3}).setOrigin(.5,.5),s=this.add.particles(this.nivel.particles),i=this.sound.add("finger_snap"),o=(this.angleGraph=this.add.graphics({x:w/2,y:h/2-30}).fillStyle(11447982,.3),this.side1=this.add.graphics({x:w/2,y:h/2-30}).lineStyle(10,11141290).setMask(t.createGeometryMask()),this.side2=this.add.graphics({x:w/2,y:h/2-30}).lineStyle(10,43520).setMask(t.createGeometryMask()),this.alien=this.add.image(w+60,h/2-30,this.nivel.alien).setScale(.4).setFlipX(!0),this.protact=this.add.image(w/2,h/2,"protact").setVisible(!1).setInteractive().on("drag",(e,t,a)=>{o.x=t,o.y=a})),t=(this.input.setDraggable(o),this.add.image(0,0,"HUD")),t=(this.nivDisplay=this.add.text(0,20,"1/5",{fontFamily:"Showcard",fontSize:80}).setOrigin(.5,.5),this.answDisplay=this.add.text(600,20,this.respuesta+"°",{fontFamily:"Showcard",fontSize:80}).setOrigin(.5,.5),this.HUD=this.add.container(w/2,630,[t,this.nivDisplay,this.answDisplay])),n=this.add.image(58,65,"btCasa").on("pointerdown",this.showConfirmScreen,this),r=this.add.image(140,65,"btAyuda").on("pointerdown",()=>this.showHelp(this.helpDisplay)),l=this.add.image(900,65,"btTransportador").on("pointerdown",()=>{o.x=734,o.y=301,o.setVisible(!o.visible),i.play()}),d=this.add.image(863,640,"btListo").on("pointerdown",this.checkWon,this);this.interactive=[n,r,l,d,o],this.animables=[e,a,t,this.alien,...this.interactive];this.tweens.add({targets:[n,r,l,d,t],scale:{from:0,to:.3},ease:"Back",duration:900}),this.tweens.add({targets:[e,a],scale:{from:0,to:1},ease:"Back",duration:900}),this.time.delayedCall(900,()=>{this.emitter=s.createEmitter({speed:100,scale:{start:.5,end:0},blendMode:"ADD"}).startFollow(this.alien)},[],this),this.tweens.add({targets:this.alien,x:726,ease:"Power3",duration:1e3,delay:900}),this.time.delayedCall(1900,this.showHelp,[this.nivel.introduccion],this)}checkWon(){var e;"0"!==this.respuesta&&Phaser.Math.Within(parseInt(this.respuesta),this.angulo,5)?(5==this.data.values.nivActual?(this.data.values.estado="levelCleared",listaNiveles.indexOf(this.nivel)+1>progreso&&(progreso=Phaser.Math.Clamp(++progreso,0,4),localStorage.setItem("progreso",progreso+[])),this.sound.add("complete").play(),this.showHelp(["¡Genial, has adivinado todos los ángulos! Gracias por ayudar a nuestro amigo alien.","Su misión en este planeta ha terminado, ¡pero espera! Conozcamos a uno de sus amigos."],"Sine.easeOut",h/2,720,0)):(this.data.values.estado="done",this.sound.add("win").play(),this.showHelp([Phaser.Utils.Array.GetRandom(frases)+"\nHas adivinado el ángulo formado por el alien.","Te has ganado una  estrella :) ¡Sigue así para ganar más!"],"Back",h/2,0,0)),this.tweens.add({targets:[this.protact,this.side1,this.side2,this.angleGraph],scale:0,ease:"Lineal",duration:200,onComplete:()=>{this.protact.setVisible(!1).setScale(1),this.side1.clear().lineStyle(10,11141290).setScale(1),this.side2.clear().lineStyle(10,43520).setScale(1),this.angleGraph.clear().fillStyle(11447982,1).setScale(1)}}),e=this.add.image(w/2,h/2+68,"star").setScale(0),this.tweens.timeline({targets:e,tweens:[{scale:{from:0,to:.63},ease:"Elastic",duration:1e3,delay:1200},{x:w/2-265+30*this.data.values.nivActual,y:636,scale:.28,ease:"Power2",duration:900,delay:100}],onComplete:()=>this.HUD.add(e).getAt(this.HUD.getAll().length-1).setX((e.x-this.HUD.x)/.3).setY(20).setScale(.28/.3)})):(this.sound.add("explain").play(),this.showHelp(["¡Ups! Parece que el ángulo es incorrecto, ¡pero sigue intentando!","Asegúrate de usar el transportador para encontrar la respuesta."],"Back",h/2,0,0)),this.respuesta="0"}showHelp(e,t="Bounce",a=-300,s=0,i=1){this.disableInputs();var o=0,n=this.add.image(0,0,"textBox").setScale(.29),r=this.add.text(0,-33,e[o],{fontFamily:"Showcard",fontSize:28,align:"center",stroke:0,strokeThickness:5}).setOrigin(.5,.5).setWordWrapWidth(.27*n.width,!0),l=this.add.image(265,-110,"hideButton").setScale(.09).on("pointerdown",()=>{switch(this.data.values.estado){case"inicio":this.angulo=5*this.angulos[this.data.values.nivActual-1],this.doPath(this.angulo);break;case"waiting":this.enableInputs();break;case"done":this.nextPath();break;case"levelCleared":var e=listaNiveles.indexOf(this.nivel);3!=e?this.goToScene("juego",listaNiveles[e+1]):this.goToScene("repaso")}u.destroy()}),d=this.add.image(-170,69,"arrowWhite").setFlipX(!0).setVisible(!1).on("pointerdown",()=>{o==e.length-1&&c.setVisible(!0).setInteractive(),o--,r.setText(e[o]),0==o&&d.setVisible(!1).disableInteractive()}),c=this.add.image(170,69,"arrowWhite").on("pointerdown",()=>{0==o&&d.setVisible(!0).setInteractive(),o++,r.setText(e[o]),o==e.length-1&&c.setVisible(!1).disableInteractive()}),u=(this.tweens.add({targets:c,x:190,ease:"Lineal",yoyo:!0,loop:-1,duration:500}),this.tweens.add({targets:d,x:-190,ease:"Lineal",yoyo:!0,loop:-1,duration:500}),this.add.container(w/2,a,[n,r,d,c,l]));this.tweens.add({targets:u,y:h/2,angle:s,scale:{from:i,to:1},ease:t,duration:1e3,onComplete:()=>{c.setInteractive(),l.setInteractive()}})}doPath(e){this.data.values.estado="waiting";var t=this.tweens.timeline({targets:this.alien,ease:"Sine.easeInOut",duration:1500,tweens:[{x:w/2,delay:200,onStart:()=>this.side1.beginPath().moveTo(this.alien.x-w/2,this.alien.y-h/2+30),onUpdate:()=>this.side1.lineTo(this.alien.x-w/2,this.alien.y-h/2+30).strokePath()},{x:w/2+212*Math.cos(Phaser.Math.DegToRad(e)),y:h/2-30-212*Math.sin(Phaser.Math.DegToRad(e)),onStart:()=>this.alien.setFlipX(!1)||this.side2.beginPath().moveTo(this.alien.x-w/2,this.alien.y-h/2+30),onUpdate:()=>this.side2.lineTo(this.alien.x-w/2,this.alien.y-h/2+30).strokePath()}]});t.calcDuration(),this.tweens.addCounter({from:0,to:e,ease:"Power2",delay:t.duration,duration:1400,onUpdate:e=>this.angleGraph.slice(0,0,100,Phaser.Math.DegToRad(0),Phaser.Math.DegToRad(-e.getValue()),!0).fillPath(),onComplete:()=>this.showHelp(this.helpDisplay)})}nextPath(){this.disableInputs(),this.alien.setFlipX(!0),this.data.values.nivActual+=1,this.data.values.estado="inicio",this.nivDisplay.setText(this.data.values.nivActual+"/5"),this.tweens.add({targets:this.alien,x:726,y:h/2-30,ease:"Sine.easeInOut",duration:1300}),this.time.delayedCall(1400,this.showHelp,[["En busca de explorar más lugares, nuestro amigo realizará otro recorrido por el planeta.","Mide bien el siguiente ángulo y ganarás otra estrellita. ¡Presta atención!"]],this)}showConfirmScreen(){this.disableInputs();var e=this.add.image(0,0,"textBox").setScale(.29),t=this.add.text(0,-43,"¿Seguro que deseas salir del juego? ¡Deberás empezar desde el principio!",{fontFamily:"Showcard",fontSize:28,align:"center"}).setOrigin(.5,.5).setWordWrapWidth(.27*e.width,!0),a=this.add.image(-120,55,"tick").setScale(.04).on("pointerdown",()=>{i.destroy(),this.goToScene("menu")}),s=this.add.image(120,55,"cross").setScale(.04).on("pointerdown",()=>{this.enableInputs(),i.destroy()}),i=this.add.container(w/2,h/2,[e,t,a,s]);this.tweens.add({targets:i,scale:{from:0,to:1},ease:"Power3",duration:800,onComplete:()=>{a.setInteractive(),s.setInteractive()}})}goToScene(e,t={}){this.emitter.stop(),[this.side1,this.side2,this.angleGraph,this.protact].forEach(e=>e.destroy()),this.tweens.add({targets:this.animables,scale:0,ease:"Back.easeIn",duration:900,onComplete:()=>this.scene.start(e,t)})}listenKeys(e){"Backspace"==e.key?this.respuesta=parseInt(this.respuesta/10)+[]:!isNaN(parseInt(e.key))&&this.respuesta.length<=2&&(this.respuesta=0==this.respuesta?e.key:this.respuesta+e.key)}enableInputs(){this.interactive.forEach(e=>e.setInteractive()),this.input.keyboard.on("keydown",this.listenKeys,this)}disableInputs(){this.interactive.forEach(e=>e.disableInteractive()),this.input.keyboard.off("keydown")}update(){this.answDisplay.setText(this.respuesta+"°")}}class Repaso extends Phaser.Scene{constructor(){super("repaso")}init(){this.clicked=!1,this.drag,this.planetas=[],this.lineas=[],this.data.set({estado:"waiting",nivActual:1})}create(){this.add.image(480,360,lastLevel.fondo);var e=this.add.image(58,65,"btCasa").setScale(.3).on("pointerdown",this.showConfirmScreen,this),t=this.add.image(140,65,"btAyuda").setScale(.3).on("pointerdown",()=>this.showHelp(["Debes unir cada planeta con el ángulo que representa, ¡pan comido para ti!","Recuerda que cada tipo de ángulo depende de qué tan abierto o cerrado esté."])),a=this.add.image(863,640,"btListo").on("pointerdown",this.checkWon,this),s=this.add.text(w/2,65,"Repaso",{fontFamily:"Showcard",fontSize:38,stroke:"#40bad2",strokeThickness:3}).setOrigin(.5,.5),i=this.add.image(w/2,240,"btAgudo").setScale(.3).setData("valor","agudos"),o=this.add.image(w/2,360,"btObtuso").setScale(.3).setData("valor","obtusos"),n=this.add.image(w/2,480,"btConcavo").setScale(.3).setData("valor","cóncavos"),r=this.add.image(0,0,"HUD2"),r=(this.nivDisplay=this.add.text(277,30,"1/3",{fontFamily:"Showcard",fontSize:80}).setOrigin(.5,.5),this.HUD=this.add.container(w/2,630,[r,this.nivDisplay]));[this.planetas,this.lineas]=this.crearPlanetasLineas(),[i,n,o].forEach(e=>e.on("pointerdown",()=>{this.clicked&&(this.clicked=!1,[...this.planetas,i,n,o].forEach(e=>this.children.bringToTop(e)),this.planetas[this.lineas.indexOf(this.drag)].data.values.correcto=this.drag.getData("respuesta")==e.getData("valor"))})),this.animables=[t,e,a,i,o,n,s,r],this.interactive=[e,t,a,i,n,o],this.tweens.add({targets:[e,t,i,o,n,a,r],scale:{from:0,to:.3},ease:"Back",duration:900}),this.tweens.add({targets:s,scale:{from:0,to:1},ease:"Back",duration:900}),this.tweens.add({targets:this.planetas,scale:{from:0,to:.38},ease:"Back",duration:900}),this.time.delayedCall(1e3,this.showHelp,[["¡Has demostrado ser un maestro de los ángulos! ¿Crees poder con el reto final?","Debes unir cada planeta con el ángulo que representa, ¡pan comido para ti! Buena suerte :)"]],this)}generarPlaneta(e,t){var a=Phaser.Utils.Array.GetRandom(listaNiveles.slice(0,3)),s=5*Phaser.Utils.Array.GetRandom(a.angulosBase),i=this.add.image(0,0,Phaser.Utils.Array.GetRandom(["tierra","venus","mars","moon"])),o=this.add.graphics().fillStyle(11447982).slice(0,0,100,Phaser.Math.DegToRad(0),Phaser.Math.DegToRad(-s),!0).fillPath(),n=this.add.graphics({}).lineStyle(10,11141290).beginPath().moveTo(0,0).lineTo(211,0).strokePath(),r=this.add.graphics({}).lineStyle(10,43520).beginPath().moveTo(0,0).lineTo(211*Math.cos(Phaser.Math.DegToRad(s)),211*Math.sin(Phaser.Math.DegToRad(-s))).strokePath(),s=this.add.image(211*Math.cos(Phaser.Math.DegToRad(s)),211*Math.sin(Phaser.Math.DegToRad(-s)),Phaser.Utils.Array.GetRandom(["alien1","alien2","alien3","alien4"])).setScale(.4);return this.add.container(e,t,[i,o,n,r,s]).setSize(423,423).setData("respuesta",a.titulo)}crearPlanetasLineas(){var e=[this.generarPlaneta(180,240),this.generarPlaneta(180,480),this.generarPlaneta(780,240),this.generarPlaneta(780,480)],t=[];for(const a of e)t.push(this.add.graphics({x:a.x,y:a.y}).lineStyle(10,11141290).setData("respuesta",a.getData("respuesta"))),a.setScale(0).setData("correcto",!1).on("pointerdown",()=>{this.clicked||(this.clicked=!0,this.drag=t[e.indexOf(a)],this.children.bringToTop(this.drag))});return[e,t]}showHelp(e,t="Bounce",a=-300,s=0,i=1){this.disableInputs();var o=0,n=this.add.image(0,0,"textBox").setScale(.29),r=this.add.text(0,-33,e[o],{fontFamily:"Showcard",fontSize:28,align:"center",stroke:0,strokeThickness:5}).setOrigin(.5,.5).setWordWrapWidth(.27*n.width,!0),l=this.add.image(265,-110,"hideButton").setScale(.09).on("pointerdown",()=>{switch(this.data.values.estado){case"waiting":this.enableInputs();break;case"done":this.nextLevel();break;case"levelCleared":this.goToMenu()}u.destroy()}),d=this.add.image(-170,69,"arrowWhite").setFlipX(!0).setVisible(!1).on("pointerdown",()=>{o==e.length-1&&c.setVisible(!0).setInteractive(),o--,r.setText(e[o]),0==o&&d.setVisible(!1).disableInteractive()}),c=this.add.image(170,69,"arrowWhite").on("pointerdown",()=>{0==o&&d.setVisible(!0).setInteractive(),o++,r.setText(e[o]),o==e.length-1&&c.setVisible(!1).disableInteractive()}),u=(this.tweens.add({targets:c,x:190,ease:"Lineal",yoyo:!0,loop:-1,duration:500}),this.tweens.add({targets:d,x:-190,ease:"Lineal",yoyo:!0,loop:-1,duration:500}),this.add.container(w/2,a,[n,r,d,c,l]));this.tweens.add({targets:u,y:h/2,angle:s,scale:{from:i,to:1},ease:t,duration:1e3,onComplete:()=>{c.setInteractive(),l.setInteractive()}}),e.length<=1&&(d.destroy(),c.destroy())}checkWon(){var e;4==this.planetas.filter(e=>e.data.values.correcto).length?(3==this.data.values.nivActual?(this.data.values.estado="levelCleared",this.sound.add("complete").play(),this.showHelp(["¡Impresionante, has logrado reconocer todos los ángulos! Eres un experto, ¡felicidades!","Gracias por jugar a Alien Angles :) ¡nuestros amigos aliens te esperarán para la próxima!"],"Sine.easeOut",h/2,720,0)):(this.data.values.estado="done",this.sound.add("win").play(),this.showHelp([Phaser.Utils.Array.GetRandom(frases)+"\nHas reconocido bien todos estos ángulos.","Te has ganado una  estrella :) ¡Sigue así para ganar más!"],"Back",h/2,0,0)),e=this.add.image(w/2,h/2+68,"star").setScale(0),this.tweens.timeline({targets:e,tweens:[{scale:{from:0,to:.63},ease:"Elastic",duration:1e3,delay:1200},{x:w/2-160+35*this.data.values.nivActual,y:636,scale:.28,ease:"Power2",duration:900,delay:100}],onComplete:()=>this.HUD.add(e).getAt(this.HUD.getAll().length-1).setX((e.x-this.HUD.x)/.3).setY(20).setScale(.28/.3)})):(this.sound.add("explain").play(),this.showHelp(["¡Ups! Parece que una de tus respuestas es incorrecta, ¡pero sigue intentando!","Recuerda que cada tipo de ángulo depende de qué tan abierto o cerrado esté."],"Back",h/2,0,0))}nextLevel(){var e,t;this.data.values.nivActual+=1,this.data.values.estado="waiting",this.nivDisplay.setText(this.data.values.nivActual+"/3"),[e,t]=this.crearPlanetasLineas(),this.tweens.add({targets:[...this.lineas,...this.planetas],scale:0,ease:"Power3",duration:900,onComplete:()=>[...this.lineas,...this.planetas].forEach(e=>e.destroy())}),this.tweens.add({targets:e,scale:.38,ease:"Back",duration:900,delay:1e3,onComplete:()=>([this.planetas,this.lineas]=[e,t],this.enableInputs())})}showConfirmScreen(){this.disableInputs();var e=this.add.image(0,0,"textBox").setScale(.29),t=this.add.text(0,-43,"¿Seguro que deseas salir? ¡Deberás empezar desde el principio!",{fontFamily:"Showcard",fontSize:28,align:"center"}).setOrigin(.5,.5).setWordWrapWidth(.27*e.width,!0),a=this.add.image(-120,55,"tick").setScale(.04).on("pointerdown",()=>{i.destroy(),this.goToMenu()}),s=this.add.image(120,55,"cross").setScale(.04).on("pointerdown",()=>{this.enableInputs(),i.destroy()}),i=this.add.container(w/2,h/2,[e,t,a,s]);this.tweens.add({targets:i,scale:{from:0,to:1},ease:"Power3",duration:800,onComplete:()=>{a.setInteractive(),s.setInteractive()}})}goToMenu(){this.interactive.forEach(e=>e.disableInteractive()),this.tweens.add({targets:this.animables.concat(this.planetas,this.lineas),scale:0,ease:"Power3",duration:800,onComplete:()=>this.scene.start("menu")})}enableInputs(){this.interactive.concat(this.planetas,this.lineas).forEach(e=>e.setInteractive())}disableInputs(){this.interactive.concat(this.planetas,this.lineas).forEach(e=>e.disableInteractive())}update(){this.clicked&&(this.drag.clear().lineStyle(10,16711680),this.drag.beginPath().moveTo(0,0).lineTo(this.input.activePointer.x-this.drag.x,this.input.activePointer.y-this.drag.y).strokePath())}}class Niveles extends Phaser.Scene{constructor(){super("niveles")}create(){this.add.image(480,360,lastLevel.fondo),this.interactive=[this.add.image(58,65,"btCasa").setData({escena:"menu",nivel:{}}),this.add.image(250,225,"agudosPreview").setScale(.3).setData({escena:"juego",nivel:listaNiveles[0]}),this.add.image(710,225,"obtusosPreview").setScale(.3).setData({escena:"juego",nivel:listaNiveles[1]}),this.add.image(250,540,"concavosPreview").setScale(.3).setData({escena:"juego",nivel:listaNiveles[2]}),this.add.image(710,540,"completoPreview").setScale(.3).setData({escena:"juego",nivel:listaNiveles[3]})],this.animables=[this.add.text(w/2,65,"Niveles",{fontFamily:"Showcard",fontSize:38,stroke:"#40bad2",strokeThickness:3}).setOrigin(.5,.5),this.add.text(250,352,"Ángulos agudos",{fontFamily:"Showcard",fontSize:26,stroke:0,strokeThickness:5}).setOrigin(.5,.5),this.add.text(710,352,"Ángulos obtusos",{fontFamily:"Showcard",fontSize:26,stroke:0,strokeThickness:5}).setOrigin(.5,.5),this.add.text(250,667,"Ángulos cóncavos",{fontFamily:"Showcard",fontSize:26,stroke:0,strokeThickness:5}).setOrigin(.5,.5),this.add.text(710,667,"Ángulos por doquier",{fontFamily:"Showcard",fontSize:26,stroke:0,strokeThickness:5}).setOrigin(.5,.5),...this.interactive];var e=this.interactive.slice(progreso+2);e.forEach(e=>{e.setTint(2039583).setData("bloqueado",!0),this.animables.push(this.add.image(e.x,e.y-10,"candado"))}),this.tweens.add({targets:this.interactive,scale:{from:0,to:.3},ease:"Back",duration:900}),this.tweens.add({targets:this.animables.slice(0,5),scale:{from:0,to:1},ease:"Back",duration:900,onComplete:()=>this.interactive.forEach(e=>e.setInteractive())}),this.tweens.add({targets:this.animables.slice(10,10+e.length),scale:{from:0,to:.9},ease:"Back",duration:900,onComplete:()=>this.input.on("gameobjectdown",(e,t,a)=>{t.data.values.bloqueado||this.goToScene(t.data.values.escena,t.data.values.nivel)})})}goToScene(e,t={}){this.interactive.forEach(e=>e.disableInteractive()),this.tweens.add({targets:this.animables,scale:0,ease:"Back.easeIn",duration:900,onComplete:()=>this.scene.start(e,t)})}}const config={type:Phaser.AUTO,scale:{mode:Phaser.Scale.FIT,autoCenter:Phaser.Scale.CENTER_BOTH,width:w,height:h},audio:{disableWebAudio:!0},physics:{default:"arcade"},scene:[Boot,Menu,Instrucciones,Juego,Niveles,Repaso]};document.fonts.load("10pt Showcard").then(()=>new Phaser.Game(config));
